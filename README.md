# AsyaAssistantBot

AsyaAssistantBot — это Telegram-бот, предназначенный для помощи в изучении языков. Он объединяет несколько возможностей:

- **Общение с AI:** Генерация ответов с использованием OpenAI GPT.
- **Перевод текста:** Перевод с использованием DeepL API.
- **Озвучивание текста:** Синтез аудио из текста с помощью OpenAI TTS.
- **Распознавание речи:** Преобразование голосовых сообщений в текст с использованием OpenAI Whisper.
- **Генерация изображений:** Создание изображений на основе текстового описания с использованием OpenAI DALL-E.

## Структура проекта
```
**├── .env # Файл переменных окружения (ключи API и т.д.)**
**├── README.md # Документация проекта**
**├── bot.py # Основной файл бота**
**├── config.py # Конфигурация и настройки (ключи, модели, голоса, языки)**
**├── requirements.txt # Список зависимостей**
**├── handlers # Обработчики команд и диалогов Telegram**
    **├── image_handler.py │** 
    **├── response_handler.py │** 
    **├── speech_handler.py │** 
    **├── translation_handler.py │** 
    **└── voice_handler.py** 
**├── services # Сервисы для работы с внешними API │** 
    **├── image_generator.py │**
    **├── response_from_assistant.py │** 
    **├── speech_to_text.py │** 
    **├── translator.py │** 
    **└── voices.py** 
**├── tests # Тесты для сервисов │**
    **├── test_image_generator.py │ 
    **├── test_response_from_assistant.py |** 
    **├── test_speech_to_text.py │**
    **├── test_translator.py │**
    **└── test_voices.py** 
**└── utils # Вспомогательные модули** 
    **├── api_utils.py # Декораторы для обработки ошибок API**
    **├── file_utils.py # Функции для работы с файлами** 
    **└── logger.py # Настройка логирования**
```



## Установка и запуск

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/yourusername/asyaassistantbot.git
   cd asyaassistantbot
   
2. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   
3. **Настройте переменные окружения:**
   ```Создайте файл .env в корне проекта и добавьте:
   TELEGRAM_BOT_TOKEN=ваш_telegram_бот_токен
   DEEPL_API_KEY=ваш_deepl_api_key
   OPENAI_API_KEY=ваш_openai_api_key
   LOG_LEVEL=INFO
   При необходимости добавьте другие переменные, как указано в config.py.

4. **Запустите бота:**
   ```bash
   python3 bot.py
   
5. **Тестирование:**
 
Запустите тесты с помощью:
python3 -m unittest discover -s tests


## Особенности проекта

**Унификация обработки ошибок:**
Вызовы OpenAI API обёрнуты в декораторы из utils/api_utils.py, что централизует обработку ошибок и логирование.

**Работа с файлами:**
Общие операции (создание директорий, получение абсолютных путей) вынесены в utils/file_utils.py.

**Единый стиль кода:**
Докстринги оформлены в формате Google style, используются единые имена параметров (update и context), а также единый стиль форматирования.

**Расширенное тестовое покрытие:**
Тесты для основных сервисов (генерация изображений, распознавание речи, озвучивание, перевод текста, генерация ответов) позволяют проверить функциональность без обращения к реальным API.

**Пользовательский интерфейс:**
Бот информирует пользователя о статусе обработки запросов (например, "⏳ Ассистент обрабатывает ваш запрос...", "⌛️ Обработка аудио, пожалуйста, подождите...") и выводит статистику токенов для ответов от AI.

**Настройка логирования:**
Уровень логирования можно задать через переменную окружения LOG_LEVEL (по умолчанию INFO). Логи записываются как в консоль, так и в файл с ротацией.


## Контрибьюция

Если у вас есть предложения или улучшения, создавайте pull request или issue в репозитории на GitHub.

## Лицензия

Этот проект распространяется под лицензией MIT.


---

## Заключение

В этом итоговом варианте проекта учтены следующие предложения:
- Расширено использование декораторов для всех вызовов OpenAI API (через `async_openai_error_handler` и `sync_openai_error_handler`).
- Добавлены дополнительные тесты с использованием фикстур и мока для изоляции.
- Пользовательский интерфейс дополнительно информирует о статусе (дополнительные сообщения в `speech_handler`).
- Возможность настройки уровня логирования через переменную окружения `LOG_LEVEL`.








